---
layout: post
title:  "Vagrant资料汇总"
date:   2014-12-16 10:25:00
categories: vagrant
---

{{page.title}}

##简介
> Vagrant是一个基于Ruby的工具，用于创建和部署虚拟化开发环境。它使用Oracle的开源VirtualBox虚拟化系统，使用 Chef创建自动化虚拟环境。

##前提
* [Oracle VirtualBox下载][qt-1]并安装

##安装
* [Vargant下载][az-1]并安装(安装后会提示重启系统)

##使用
>几点说明:
>以下操作都是在windows命令行下操作;
>使用$VBox代表当前工作目录(如:F:\Work\VBox);
>考虑到网络下载问题，建议先从网络下载后再采用本地方式初始化;
>本地最好放在$VBox目录下，本人测试时使用`G:\Software\OS\lucid32.box`进行本地初始化不成功(可能对路径支持有bug),错误如下:
>>F:\Work\VBox>vagrant box add base G:\Software\OS\lucid32.box
==> box: Adding box 'base' (v0) for provider:
    box: Downloading: file://G:/Software/OS/lucid32.box
    box:
An error occurred while downloading the remote file. The error
message, if any, is reproduced below. Please fix this error and try
again.
Couldn't open file /Software/OS/lucid32.box.

1. 初始化VBox
	* 本地方式： `vagrant box add base lucid32.box`;
	* 网络方式： `vagrant box add base http://files.vagrantup.com/lucid32.box`
2. 初始化配置: `vagrant init`,执行后会生成配置文件Vagrantfile,打开修改配置即可，可参考[配置修改][sy-1]
3. 加载: `vagrant up`
4. 连接: `vagrant ssh`, 缺省用户名/密码都是vagrant

##制作
1. [如何制作一个vagrant的base box][zz-1]
2. [用veewee创建vagrant的虚拟机][zz-2]
3. [veewee使用入门][zz-3]
4. [使用Veewee][zz-4]

##个人习惯
* Vagrantfile配置项：
	* 使用桥接模式: `config.vm.network "public_network", ip: "172.27.172.136"`

##参考
* [已有的box库][ck-1]
* [使用Vagrant在Windows下部署开发环境][ck-2]

##附：VeeWee使用
* 查看支持的模板: 	`veewee vbox templates`;
* 根据支持的模板生成: `veewee vbox define '<box_name>' 'windows-7-enterprise-i386'`;
* 修改配置文件(./definitions/<box_name>/define.rb), 修改`:iso_file`内容为实际操作系统iso文件名(此文件放在./iso目录下);
* 安装: `veewee vbox build <box_name>`
* 生成box: `veewee vbox export <box_name>`

[qt-1]: http://www.oracle.com/technetwork/server-storage/virtualbox/downloads/index.html
[az-1]: https://www.vagrantup.com/
[sy-1]: http://www.kissthink.com/archive/v-a-g-r-a-n-t-shi-yong-jian-jie.html
[ck-1]: http://www.vagrantbox.es/
[ck-2]: http://blog.smdcn.net/article/1308.html
[zz-1]: http://blog.163.com/ly_89/blog/static/186902299201412125252320/
[zz-2]: http://www.larrycaiyu.com/2011/11/04/veewee-create-vm.html
[zz-3]: https://github.com/larrycai/blog/blob/master/cn/veewee_create_vm.mkd
[zz-4]: http://v2ex.com/t/90141
